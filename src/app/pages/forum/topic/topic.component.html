@if (topicSignal(); as topic) {
  <div class="detail-container animate-fade-in-up">
    
    <!-- HERO IMAGE AREA -->
    <div class="hero-wrapper">
      <!-- Fallback por si no hay imagen -->
      <img [src]="topic.topicoImagen || 'assets/placeholder-topic.jpg'" [alt]="topic.topicoTitulo" class="hero-image">
      
      <button (click)="onClose()" class="btn-back">
        <i class="fas fa-arrow-left"></i> Volver al tablón
      </button>
      
      <div class="hero-overlay"></div>
    </div>

    <!-- CONTENIDO FLOTANTE -->
    <div class="content-card-wrapper">
      <div class="content-card">
        
        <!-- Header del Artículo -->
        <div class="article-header">
          <div class="meta-badges">
            <div class="badge-group">
              <span class="category-badge">{{ topic.topicoCategoria || 'Anuncio' }}</span>
              <!-- NUEVO: Badge si es evento -->
              @if (isEvent()) {
                <span class="event-badge"><i class="fas fa-calendar-star"></i> Evento</span>
              }
            </div>
            
            <div class="date-group">
              <span class="date-badge">
                <i class="far fa-clock"></i> {{ formatFecha(topic.topicoFecha) }}
              </span>
              <!-- NUEVO: Tiempo de lectura -->
              <span class="reading-time">
                &bull; {{ readingTime() }}
              </span>
            </div>
          </div>

          <h1 class="article-title">{{ topic.topicoTitulo }}</h1>

          <div class="author-row">
            <div class="author-avatar">
              <!-- Usar inicial si no hay avatar real -->
              {{ topic.topicoAutor.charAt(0).toUpperCase() }}
            </div>
            <div class="author-info">
              <span class="author-name">Por {{ topic.topicoAutor }}</span>
              <span class="author-role">Miembro de la comunidad</span>
            </div>
          </div>

          <!-- NUEVO: Tarjeta destacada si tiene fecha de evento -->
          @if (topic.topicoFechaEvento) {
            <div class="event-highlight-card">
              <div class="event-icon">
                <i class="fas fa-calendar-alt"></i>
              </div>
              <div class="event-info">
                <span class="event-label">Fecha del Evento</span>
                <strong class="event-datetime">{{ formatEventDate(topic.topicoFechaEvento) }}</strong>
                <span class="event-cta">¡No olvides agendarlo!</span>
              </div>
            </div>
          }

        </div>

        <hr class="divider">

        <div class="article-body prose" [innerHTML]="safeContent()"></div>

        <!-- Footer del Artículo -->
        <div class="article-footer">
          <div class="footer-left">
            <p class="footer-note">ID Ref: #{{ topic.topicoId }} — Comentarios desactivados.</p>
          </div>
          
          <div class="footer-actions">
            <!-- NUEVO: Botón compartir -->
            <button class="btn-secondary" (click)="shareTopic()" title="Copiar enlace">
              <i class="fas fa-share-alt"></i>
            </button>
            <button class="btn-contact">Contactar Organizador</button>
          </div>
        </div>

      </div>
    </div>

  </div>
}