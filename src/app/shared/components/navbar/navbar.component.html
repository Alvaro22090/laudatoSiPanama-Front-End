<nav class="navbar" [class.scrolled]="isScrolled">
    <div class="nav-container">
        
        <!-- LOGO -->
        <a routerLink="/" class="nav-logo" (click)="isMenuOpen = false">
            <div class="logo-icon-bg">
                <img src="icono.png" alt="Descripción breve del ícono" class="icono-png">
            </div>
            <span class="logo-text">LaudatoSi<span class="text-earth">Panamá</span></span>
        </a>

        <!-- MENÚ ESCRITORIO -->
        <div class="nav-desktop">
            <div class="nav-links">
                <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Inicio</a>
                <a routerLink="/description" routerLinkActive="active">Quiénes Somos</a>
                <a routerLink="/foro" routerLinkActive="active">Foro</a>
                <a routerLink="/contacto" routerLinkActive="active">Contacto</a>
            </div>

            <!-- AQUÍ ESTÁ TU COMPONENTE DE LOGIN INTEGRADO -->
            <!-- Le ponemos la clase nav-auth para posicionarlo y #loginRef para controlarlo -->
            <div class="nav-auth">
                <app-login #loginRef></app-login>
            </div>
        </div>

        <!-- BOTÓN HAMBURGUESA (MÓVIL) -->
        <button class="menu-toggle" (click)="toggleMenu()" [class.active]="isMenuOpen">
            <span class="line-hamburguer"></span>
            <span class="line-hamburguer"></span>
            <span class="line-hamburguer"></span>
        </button>
    </div>

    <!-- MENÚ MÓVIL -->
    @if (isMenuOpen) {
        <div class="mobile-menu">
            <a routerLink="/" (click)="toggleMenu()">Inicio</a>
            <a routerLink="/description" (click)="toggleMenu()">Quiénes Somos</a>
            <a routerLink="/foro" (click)="toggleMenu()">Foro</a>
            <a routerLink="/contacto" (click)="toggleMenu()">Contacto</a>
            
            <div class="mobile-divider"></div>

            <!-- Lógica Móvil conectada a tu Login Component -->
            @if (loginRef.loginService.isLoggedIn()) {
                 <a routerLink="/usuario" (click)="toggleMenu()" class="highlight">
                    <i class="fas fa-user"></i> Mi Cuenta
                 </a>
                 <button (click)="loginRef.cerrarSesion(); toggleMenu()" class="mobile-logout">
                    Cerrar Sesión
                 </button>
            } @else {
                <!-- Al hacer click, llamamos a abrirModal() de tu componente hijo -->
                <button (click)="loginRef.abrirModal(); toggleMenu()" class="highlight">Ingresar</button>
                <a routerLink="/registro" (click)="toggleMenu()" class="highlight">Registrarse</a>
            }
        </div>
    }
</nav>